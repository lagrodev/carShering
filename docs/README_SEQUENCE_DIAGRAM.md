# üìä Sequence Diagrams Documentation

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–∏–∞–≥—Ä–∞–º–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –¥–ª—è Car Sharing Backend

## üìã –û–±–∑–æ—Ä

–ü–∞–ø–∫–∞ `sequence/` —Å–æ–¥–µ—Ä–∂–∏—Ç —É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –¥–ª—è 7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∫–∞—Ä—à–µ—Ä–∏–Ω–≥–∞. –ö–∞–∂–¥–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –º–µ–∂–¥—É —Å–ª–æ—è–º–∏ —Å–∏—Å—Ç–µ–º—ã.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
docs/sequence/
‚îú‚îÄ‚îÄ 01_registration_email_verification.puml  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email
‚îú‚îÄ‚îÄ 02_authentication_login.puml              - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–≤—Ö–æ–¥)
‚îú‚îÄ‚îÄ 03_browse_available_cars.puml             - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
‚îú‚îÄ‚îÄ 04_create_rental_contract.puml            - –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–∞ –∞—Ä–µ–Ω–¥—ã
‚îú‚îÄ‚îÄ 05_get_car_details.puml                   - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–µ–π –∞–≤—Ç–æ–º–æ–±–∏–ª—è
‚îú‚îÄ‚îÄ 06_add_remove_favorite.puml               - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
‚îî‚îÄ‚îÄ 07_token_refresh.puml                     - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–∞
```

## üé® –£—á–∞—Å—Ç–Ω–∏–∫–∏ –¥–∏–∞–≥—Ä–∞–º–º

–í—Å–µ –¥–∏–∞–≥—Ä–∞–º–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π –Ω–∞–±–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:

| –£—á–∞—Å—Ç–Ω–∏–∫ | –û–ø–∏—Å–∞–Ω–∏–µ | –¶–≤–µ—Ç |
|----------|----------|------|
| **User** | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã | LightPink |
| **Frontend** | –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ | LightYellow |
| **API/Server** | Backend —Å–µ—Ä–≤–∏—Å | LightBlue |
| **Database** | PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | Lavender |

---

## üéØ –û–ø–∏—Å–∞–Ω–∏–µ –¥–∏–∞–≥—Ä–∞–º–º

### 1. Registration & Email Verification (–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è)

**–§–∞–π–ª:** `01_registration_email_verification.puml`

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
2. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç POST /api/registration
3. API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å email, —Ö–µ—à–∏—Ä—É–µ—Ç –ø–∞—Ä–æ–ª—å
4. –°–æ–∑–¥–∞—ë—Ç—Å—è –∫–ª–∏–µ–Ω—Ç, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ–¥ –Ω–∞ email
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
6. API –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç email

---

### 2. Authentication Login (–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

**–§–∞–π–ª:** `02_authentication_login.puml`

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email –∏ –ø–∞—Ä–æ–ª—å
2. API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
3. –ì–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JWT —Ç–æ–∫–µ–Ω—ã (access + refresh)
4. –¢–æ–∫–µ–Ω—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ cookies
5. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí 401
- –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å ‚Üí 401
- –ê–∫–∫–∞—É–Ω—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω ‚Üí 403

---

### 3. Browse Available Cars (–ö–∞—Ç–∞–ª–æ–≥ –∞–≤—Ç–æ)

**–§–∞–π–ª:** `03_browse_available_cars.puml`

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
2. API –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –∫—Ä–∏—Ç–µ—Ä–∏—è–º
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π
4. –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∞–≤—Ç–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–µ—Ç–∞–ª–∏

---

### 4. Create Rental Contract (–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–§–∞–π–ª:** `04_create_rental_contract.puml`

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –¥–∞—Ç—ã –∞—Ä–µ–Ω–¥—ã
2. API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–ª–∏–µ–Ω—Ç–∞ –∏ –∞–≤—Ç–æ
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –¥–∞—Ç—ã
4. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Å—Ç–æ–∏–º–æ—Å—Ç—å
5. –°–æ–∑–¥–∞—ë—Ç—Å—è –¥–æ–≥–æ–≤–æ—Ä –∞—Ä–µ–Ω–¥—ã

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- –ê–≤—Ç–æ –∑–∞–Ω—è—Ç–æ ‚Üí 409 Conflict

---

### 5. Get Car Details (–î–µ—Ç–∞–ª–∏ –∞–≤—Ç–æ)

**–§–∞–π–ª:** `05_get_car_details.puml`

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–∞—Ä—Ç–æ—á–∫—É –∞–≤—Ç–æ–º–æ–±–∏–ª—è
2. API –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –∑–∞–Ω—è—Ç—ã–µ –ø–µ—Ä–∏–æ–¥—ã
3. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ (–µ—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
4. –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –¥–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

---

### 6. Add/Remove Favorite (–ò–∑–±—Ä–∞–Ω–Ω–æ–µ)

**–§–∞–π–ª:** `06_add_remove_favorite.puml`

**–°—Ü–µ–Ω–∞—Ä–∏–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
2. API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ
3. –°–æ–∑–¥–∞—ë—Ç—Å—è –∑–∞–ø–∏—Å—å –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

**–°—Ü–µ–Ω–∞—Ä–∏–π —É–¥–∞–ª–µ–Ω–∏—è:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "–£–¥–∞–ª–∏—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ"
2. API –Ω–∞—Ö–æ–¥–∏—Ç –∏ —É–¥–∞–ª—è–µ—Ç –∑–∞–ø–∏—Å—å

---

### 7. Token Refresh (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞)

**–§–∞–π–ª:** `07_token_refresh.puml`

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. Access —Ç–æ–∫–µ–Ω –∏—Å—Ç—ë–∫ (401 –æ—à–∏–±–∫–∞)
2. Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç refresh —Ç–æ–∫–µ–Ω
3. API –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—É—é –ø–∞—Ä—É —Ç–æ–∫–µ–Ω–æ–≤
4. –ü–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π –∑–∞–ø—Ä–æ—Å

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- Refresh —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω ‚Üí –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥

---

## üîß –ö–∞–∫ –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å

### –í IntelliJ IDEA
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–ª–∞–≥–∏–Ω **PlantUML Integration**
2. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π `.puml` —Ñ–∞–π–ª
3. –î–∏–∞–≥—Ä–∞–º–º–∞ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –≤ preview-–ø–∞–Ω–µ–ª–∏

### –û–Ω–ª–∞–π–Ω
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [PlantUML Online Server](http://www.plantuml.com/plantuml)
- –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `.puml` —Ñ–∞–π–ª–∞

### –≠–∫—Å–ø–æ—Ä—Ç –≤ PNG/SVG
```bash
java -jar plantuml.jar docs/sequence/*.puml
```

